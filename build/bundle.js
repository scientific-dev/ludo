var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function s(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t){e.appendChild(t)}function i(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function c(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function p(){return u(" ")}function f(){return u("")}function h(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function g(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function v(e,t,n){e.classList[n?"add":"remove"](t)}let y;function w(e){y=e}function b(e){(function(){if(!y)throw new Error("Function called outside component initialization");return y})().$$.on_mount.push(e)}const x=[],k=[],N=[],P=[],S=Promise.resolve();let C=!1;function L(e){N.push(e)}const R=new Set;let E=0;function T(){const e=y;do{for(;E<x.length;){const e=x[E];E++,w(e),z(e.$$)}for(w(null),x.length=0,E=0;k.length;)k.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];R.has(t)||(R.add(t),t())}N.length=0}while(x.length);for(;P.length;)P.pop()();C=!1,R.clear(),w(e)}function z(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(L)}}const I=new Set;let _;function O(){_={r:0,c:[],p:_}}function A(){_.r||r(_.c),_=_.p}function B(e,t){e&&e.i&&(I.delete(e),e.i(t))}function H(e,t,n,r){if(e&&e.o){if(I.has(e))return;I.add(e),_.c.push((()=>{I.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function U(e){e&&e.c()}function D(e,n,o,l){const{fragment:i,on_mount:a,on_destroy:c,after_update:d}=e.$$;i&&i.m(n,o),l||L((()=>{const n=a.map(t).filter(s);c?c.push(...n):r(n),e.$$.on_mount=[]})),d.forEach(L)}function M(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function q(e,t){-1===e.$$.dirty[0]&&(x.push(e),C||(C=!0,S.then(T)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Y(t,s,o,l,i,c,d,u=[-1]){const p=y;w(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(p?p.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:s.target||p.$$.root};d&&d(f.root);let h=!1;if(f.ctx=o?o(t,s.props||{},((e,n,...r)=>{const s=r.length?r[0]:n;return f.ctx&&i(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),h&&q(t,e)),n})):[],f.update(),h=!0,r(f.before_update),f.fragment=!!l&&l(f.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);f.fragment&&f.fragment.l(e),e.forEach(a)}else f.fragment&&f.fragment.c();s.intro&&B(t.$$.fragment),D(t,s.target,s.anchor,s.customElement),T()}w(p)}class j{$destroy(){M(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function F(t){let n,r;return{c(){n=d("div"),m(n,"class","coin svelte-1oo0wzo"),m(n,"id",r="coin-"+t[0]+"-"+t[1]),g(n,"background-color","var(--"+t[0]+"-player)")},m(e,t){i(e,n,t)},p(e,[t]){3&t&&r!==(r="coin-"+e[0]+"-"+e[1])&&m(n,"id",r),1&t&&g(n,"background-color","var(--"+e[0]+"-player)")},i:e,o:e,d(e){e&&a(n)}}}function J(e,t,n){let{code:r,i:s}=t;return e.$$set=e=>{"code"in e&&n(0,r=e.code),"i"in e&&n(1,s=e.i)},[r,s]}class G extends j{constructor(e){super(),Y(this,e,J,F,o,{code:0,i:1})}}const W=[19,20,21,22,23,24,6,5,4,3,2,1,7,13,14,15,16,17,18,42,41,40,39,38,37,43,49,50,51,52,53,54,72,71,70,69,68,67,61,55,56,57,58,59,60,36,35,34,33,32,31,25],K={red:20,blue:14,yellow:50,green:56},Q={red:[26,27,28,29,30],blue:[8,9,10,11,12],yellow:[44,45,46,47,48],green:[62,63,64,65,66]},V=[33,69,39,3,...Object.values(K)],X=Object.fromEntries(["red","yellow","green","blue"].map((e=>{let t=W.indexOf(K[e]),n=W.slice(t,t+51);return 51!=n.length&&(n=n.concat(W.slice(0,51-n.length))),[e,[...n,...Q[e],1/0]]}))),Z=['<div class="dot"></div>','<div class="dot"></div>'.repeat(2),'<div class="dot"></div>'.repeat(3),'<div class="flex"><div class="dot"></div> <div class="dot"></div></div>'.repeat(2),'\n        <div class="flex"><div class="dot"></div> <div class="e-dot"></div> <div class="dot"></div></div> \n        <div class="flex"><div class="e-dot"></div> <div class="dot"></div></div> \n        <div class="flex"><div class="dot"></div> <div class="e-dot"></div> <div class="dot"></div></div>\n    ','<div class="flex"><div class="dot"></div> <div class="dot"></div></div>'.repeat(3)],ee={red:"top-left",blue:"top-right",green:"bottom-left",yellow:"bottom-right"};Array.prototype.count=function(e){let t=0;for(let n=0;n<this.length;n++)e(this[n])&&(t+=1);return t};class te{constructor(){let e=document.createElement("div");e.className="alert",e.style.opacity=0,this.element=e}setInnerHTML(e){return this.element.innerHTML=e,this}appendChildren(...e){return this.element.append(...e),this}setParent(e){return this.parent=e,this.parent.prepend(this.element),this}removeParent(){return this.parent.removeChild(this.element),this}async display(e=200){return await oe(e),this.element.style.opacity=1,this}async undisplay(){return this.element.style.opacity=0,await oe(200),this.removeParent()}}class ne{static NULL_PLAYER=new ne("No Player","null").null();kills=0;cors=[null,null,null,null];constructor(e,t,n){this.name=e,this.color=t,n&&(this.isBot=!0),this.updateProps()}static fromJSON(e){let t=new ne(e.name,e.color);return t.cors=e.cors.map((e=>"nan"==e?NaN:e)),t.kills=e.kills,e.color&&(t.color=e.color),e.rank&&(t.rank=e.rank),e.bot&&(t.isBot=e.bot),t.updateProps()}updateProps(){return this.coinsReached=this.cors.count(isNaN),this.coinsAtPrison=this.cors.count((e=>"object"==typeof e)),this.coinsOutside=this.cors.count((e=>!isNaN(e)&&"number"==typeof e)),this}refresh(){return delete this.rank,this.cors=[null,null,null,null],this.kills=0,this.updateProps()}cor(e,t){return this.cors[e]=t,this.updateProps()}get completed(){return this.cors.every(isNaN)}get startPoint(){return K[this.color]}activeCoinIndices(e){let t=[],n=X[this.color];for(let r=0;r<this.cors.length;r++){let s=this.cors[r];isNaN(s)||"number"!=typeof s||"number"==typeof n[s+e]&&t.push(r)}return t}get coinsInsideIndices(){let e=[];for(let t=0;t<this.cors.length;t++)"object"==typeof this.cors[t]&&e.push(t);return e}get type(){return this.isBot?"bot":this.isNull?"null":"player"}null(){return this.isNull=!0,this}toJSON(){return{kills:this.kills,cors:this.cors.map((e=>isNaN(e)?"nan":e)),name:this.name,color:this.color,bot:this.isBot}}}function re(){}re.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function s(){r.off(e,s),t.apply(n,arguments)}return s._=t,this.on(e,s,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,s=n.length;r<s;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],s=[];if(r&&t)for(var o=0,l=r.length;o<l;o++)r[o].fn!==t&&r[o].fn._!==t&&s.push(r[o]);return s.length?n[e]=s:delete n[e],this}};var se=re;async function oe(e){return new Promise((t=>setTimeout(t,e)))}function le(e){return Math.floor(Math.random()*e)}function ie(e){return 1==e?"1st":2==e?"2nd":3==e?"3rd":`${e}th`}re.TinyEmitter=se,Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},String.prototype.toProperCase=function(){return this.charAt(0).toUpperCase()+this.substring(1).toLowerCase()},Element.prototype.setNodeIDCss=function(){for(let e=0;e<this.children.length;e++)this.children[e].style.setProperty("--node-id",e+1)};const ae=new class extends se{started=!1;ended=!1;activePlayers=[];activeBots=[];currentTurn=0;ranks=[];players={red:new ne("You","red"),green:ne.NULL_PLAYER,yellow:ne.NULL_PLAYER,blue:ne.NULL_PLAYER};get playersArray(){return Object.values(this.players)}get playerCount(){return this.playersArray.filter((e=>!e.isNull)).length}nextTurn(){let e=this.activePlayers.length-1;this.currentTurn+=this.currentTurn==e?-e:1}onWindowLoad(){let e=document.createElement("style");e.innerHTML=V.map((e=>`#step-${e} {background-color:var(--dark-step-color)!important}`)).join(""),e.innerHTML+=Object.entries(K).map((([e,t])=>`#step-${t} {background-color:var(--${e}-player)!important}`)).join(""),document.getElementById("wrap").append(e),this.started&&(this.emit("start"),this.alert("Resuming your game...",1200))}createPlayer(e){let t=Object.entries(this.players).find((([e,t])=>t.isNull));return t?(this.players[t[0]]=new ne(e?"Bot":"Player",t[0],e),this.emit(`${t[0]}Update`).emit("playerCountUpdate"),this.players[t[0]]):null}deletePlayer(e){if(1==this.playerCount)return null;let t=this.players[e];return this.players[e]=ne.NULL_PLAYER,this.emit(`${e}Update`).emit("playerCountUpdate"),t}updatePlayerName(e,t){this.players[e].name=t,this.emit(`${e}Update`)}async start(){return!this.started&&(this.activePlayers=[],this.ranks=[],Object.entries(this.players).forEach((e=>{e[1].isNull||(this.activePlayers.push(e[1].refresh()),this.emit(`${e[1].color}Turn`))})),!(this.activePlayers.length<2)&&(this.started=!0,this.ended=!1,this.emit("start"),this.activeBots=this.activePlayers.filter((e=>e.isBot)),this.clearSaved(),await this.alert("The game has started...",1e3),this.startTurns()))}async startTurns(){let e=!1,t=0;for(;!await this.checkForCompletion();){this.current=this.activePlayers[this.currentTurn],this.save();let n=this.current,r=!n.isBot;if(n.completed){this.ranks.includes(n)||await this.pushRank(n),this.nextTurn(),t=0;continue}e||(this.emit("turn",n.color),r&&await this.waitForEvent("diceRoll"));let s=t||await this.diceRoll(n.name+"'s")+1,o=n.coinsInsideIndices,l=6==s;if(e=l,4==o.length)l?(n.cor(0,0),await this.moveCoin(n.color,1,n.startPoint),this.emit(`${n.color}Update`)):await this.alert("Unfortunate!",1200);else{let i,a,c=n.coinsAtPrison&&l;if(!l&&!n.coinsOutside){e=!1,t=0,await this.alert("Unfortunate! No coins to move!",1200),this.nextTurn();continue}if((a=this.expectOutOfRange(s))&&!c){e=!1,t=0,await this.alert(`Unforturnate! Needed ${a} to reach the house.`,1200),this.nextTurn();continue}if(c=!1,l&&r&&this.emit(`${n.color}PrisonSelectable`),r?(await this.alert("Select your move...",1100),i=await this.waitForEvent(`${n.color}Select`)):i=c?"prison":await this.getBotChoice(s,o.length),"prison"==i){let e=o.random();n.cor(e,0),await this.moveCoin(n.color,e+1,n.startPoint),this.emit(`${n.color}Update`)}else if("number"==typeof i[0]){let{bonusRoll:n,newStep:o,gameOver:l,playerCompleted:a,outOfRange:c}=await this.moveCoinInPath(i[0],s);if(c&&r){t=s,e=!0;continue}if(l)break;a?e=!1:(e=e||n,isNaN(o)||(e=await this.killCoins(o)||e))}l&&r&&this.emit(`${n.color}PrisonSelectable`)}e?await this.alert("Rolling again...",750):this.nextTurn(),t=0}return this.end(),!0}async moveCoinInPath(e,t){let n=this.current,r=`coin-${n.color}-${e}`,s=n.cors[e-1]+t,o=X[n.color][s];if(o==1/0){n.cor(e-1,NaN);let t=document.getElementById(r),s=n.completed;return t.parentElement.removeChild(t),await this.alert(`${n.name}'s coin has reached the house!`,1100),s&&await this.pushRank(n,!0,!1),this.emit(`${n.color}Update`),{bonusRoll:!0,newStep:NaN,gameOver:await this.checkForCompletion(),playerCompleted:s}}return o?(n.cor(e-1,s),await this.moveCoin(n.color,e,o),{bonusRoll:!1,newStep:o}):(await this.alert(`Unfortunate! Needed ${56-n.cors[e-1]} to reach the house...`),{outOfRange:!0,newStep:NaN})}async killCoins(e){if(!V.includes(e))for(let t=0;t<this.activePlayers.length;t++){let n=this.activePlayers[t];if(n==this.current)continue;let r=X[n.color],s=0;for(let t=0;t<n.cors.length;t++)r[n.cors[t]]==e&&(n.cor(t,null),s+=1,await this.moveCoinToPrison(n.color,t+1));if(s)return this.current.kills+=s,this.emit(`${n.color}Update`).emit(`${this.current.color}Update`),!0}}async moveCoin(e,t,n){let r=document.getElementById(`coin-${e}-${t}`),s=document.getElementById(`step-${n}`),o=r.cloneNode();r.classList.add("coin-exit"),await oe(500),r.parentElement.removeChild(r),o.addEventListener("click",(()=>this.emit(`${e}Select`,t))),o.classList.add("coin-active"),s.appendChild(o),s.setNodeIDCss(),await oe(400)}async moveCoinToPrison(e,t){let n=document.getElementById(`coin-${e}-${t}`),r=n.parentElement,s=n.cloneNode();n.classList.add("coin-exit"),await oe(500),n.parentElement.removeChild(n),s.classList.add("coin-active"),document.querySelector(`#prison-${e} .prison-inner div`).appendChild(s),r.setNodeIDCss(),await oe(400)}waitForEvent(e){return new Promise((t=>{const n=(...r)=>{this.off(e,n),t(r)};this.on(e,n)}))}getBotChoice(e,t){let n=this.current.activeCoinIndices(e);return!n.length||6==e&&t&&le(2)?"prison":this.getBotCoinChoice(n,e)}getBotCoinChoice(e,t){let n=X[this.current.color],r=[];for(let e=0;e<this.current.cors.length;e++){let s=this.current.cors[e];if(isNaN(s))r.push(NaN);else{let o=n[s+t];if(o==1/0)return[e+1];r.push(o)}}for(let e=0;e<this.activePlayers.length;e++){let t=this.activePlayers[e];if(this.current==t)continue;let n=X[t.color];for(let e=0;e<t.cors.length;e++){let s=n[t.cors[e]],o=r.findIndex((e=>"number"==typeof e&&e==s));if(-1!=o)return[o+1]}}return[e.random()+1]}async checkForCompletion(){if(3==this.ranks.length)return await this.pushRank(this.activePlayers.find((e=>!this.ranks.includes(e)))),!0;for(let e=0;e<this.activePlayers.length;e++){let t=this.activePlayers[e];if(!t.isBot&&!t.completed)return!1}for(let e=0;e<this.activeBots.length;e++){let t=this.activeBots[e];t.completed||await this.pushRank(t,!1)}return!0}async pushRank(e,t=!0,n=!0){this.ranks.push(e),e.rank=this.ranks.length,t&&await this.alert(`${e.name} has won the ${ie(this.ranks.length)} place!`,1100),this.emit("canDisplayResults"),n&&this.emit(`${e.color}Update`)}expectOutOfRange(e){if(1==this.current.coinsOutside){let t=X[this.current.color];for(let n=0;n<this.current.cors.length;n++){let r=this.current.cors[n];if(!isNaN(r)&&"number"==typeof r&&!t[r+e])return 56-r}}}getRandomDiceSideHTML(){return this.getDiceSideHTML(le(6))}getDiceSideHTML(e){return`<div class="dside-${e+1}">${Z[e]}</div>`}toJSON(){return{started:this.started,ended:this.ended,currentTurn:this.currentTurn,ranks:this.ranks.map((e=>e.color)),players:this.activePlayers.map((e=>e.toJSON()))}}save(){localStorage.setItem("ludo_data",JSON.stringify(this.toJSON()))}clearSaved(){localStorage.removeItem("ludo_data")}async startFromSaved(){let e=JSON.parse(localStorage.getItem("ludo_data")||"{}"),t=[];this.started=!1,this.ended=!1,this.currentTurn=e.currentTurn,this.activeBots=[],this.activePlayers=e.players.map(ne.fromJSON),this.activeBots=this.activePlayers.filter((e=>e.isBot)),this.ranks=[],this.players={red:ne.NULL_PLAYER,green:ne.NULL_PLAYER,yellow:ne.NULL_PLAYER,blue:ne.NULL_PLAYER};for(let e=0;e<this.activePlayers.length;e++){let n=this.activePlayers[e],r=X[n.color];this.players[n.color]=n,this.emit(`${n.color}Update`);for(let e=0;e<n.cors.length;e++){let s=n.cors[e];if(isNaN(s)){let t=document.getElementById(`coin-${n.color}-${e+1}`);t.parentElement.removeChild(t)}else"number"==typeof s&&t.push(this.moveCoin(n.color,e+1,r[s]))}}for(let t=0;t<e.ranks.length;t++){let n=this.players[e.ranks[t]];n.rank=t+1,this.ranks.push(n)}this.ranks.length&&this.emit("canDisplayResults"),e.ended?this.end().emit("displayResult"):e.started&&(this.started=!0,this.emit("start")),await Promise.all(t),e.started&&(await this.alert("The game has resumed...",1e3),await this.startTurns())}async alert(e,t=2e3){let n=await(new te).setParent(document.querySelector(".board-wrapper")).setInnerHTML(`<p>${e}</p>`).display(0);await oe(t),await n.undisplay()}async diceRoll(e="Your",t=le(6)){let n=document.createElement("p");n.innerHTML=`${e} Turn`;let r=document.createElement("div");r.className="dice",r.innerHTML=this.getRandomDiceSideHTML();let s=await(new te).appendChildren(n,r).setParent(document.querySelector(".board-wrapper")).display();for(let e=0;e<4;e++)await oe(50*e),r.innerHTML=this.getRandomDiceSideHTML();return await oe(200),r.innerHTML=this.getDiceSideHTML(t),await oe(400),r.style.transform="scale(1.2)",await oe(250),r.style.transform="scale(1)",await oe(750),await s.undisplay(),t}end(){return this.started=!1,this.ended=!0,this.save(),this.emit("end"),this}},ce=Boolean(localStorage.getItem("ludo_data"));function de(e){let t,n,r,s,o,c,u,f,$,v,y,w,b,x,k,N,P;return o=new G({props:{code:e[0],i:1}}),u=new G({props:{code:e[0],i:2}}),$=new G({props:{code:e[0],i:3}}),y=new G({props:{code:e[0],i:4}}),{c(){t=d("div"),n=d("div"),r=d("div"),s=d("div"),U(o.$$.fragment),c=p(),U(u.$$.fragment),f=p(),U($.$$.fragment),v=p(),U(y.$$.fragment),m(s,"class","flex flex-wrap"),m(r,"class","prison-inner svelte-17tvo21"),g(r,"margin",e[3]+"px"),g(r,"width",e[2]+"px"),g(r,"height",e[2]+"px"),m(n,"class","prison-cover svelte-17tvo21"),m(n,"style",w="border-"+ee[e[0]]+"-radius: 8px;"),m(t,"class",b="prison "+(e[4]?"prison-selectable":"")+" svelte-17tvo21"),g(t,"width",e[1]+"px"),g(t,"height",e[1]+"px"),g(t,"--color","var(--"+e[0]+"-player)"),m(t,"id",x="prison-"+e[0])},m(a,d){i(a,t,d),l(t,n),l(n,r),l(r,s),D(o,s,null),l(s,c),D(u,s,null),l(s,f),D($,s,null),l(s,v),D(y,s,null),k=!0,N||(P=h(t,"click",e[6]),N=!0)},p(e,[s]){const l={};1&s&&(l.code=e[0]),o.$set(l);const i={};1&s&&(i.code=e[0]),u.$set(i);const a={};1&s&&(a.code=e[0]),$.$set(a);const c={};1&s&&(c.code=e[0]),y.$set(c),(!k||8&s)&&g(r,"margin",e[3]+"px"),(!k||4&s)&&g(r,"width",e[2]+"px"),(!k||4&s)&&g(r,"height",e[2]+"px"),(!k||1&s&&w!==(w="border-"+ee[e[0]]+"-radius: 8px;"))&&m(n,"style",w),(!k||16&s&&b!==(b="prison "+(e[4]?"prison-selectable":"")+" svelte-17tvo21"))&&m(t,"class",b),(!k||2&s)&&g(t,"width",e[1]+"px"),(!k||2&s)&&g(t,"height",e[1]+"px"),(!k||1&s)&&g(t,"--color","var(--"+e[0]+"-player)"),(!k||1&s&&x!==(x="prison-"+e[0]))&&m(t,"id",x)},i(e){k||(B(o.$$.fragment,e),B(u.$$.fragment,e),B($.$$.fragment,e),B(y.$$.fragment,e),k=!0)},o(e){H(o.$$.fragment,e),H(u.$$.fragment,e),H($.$$.fragment,e),H(y.$$.fragment,e),k=!1},d(e){e&&a(t),M(o),M(u),M($),M(y),N=!1,P()}}}function ue(e,t,n){let r,s,o,{code:l,cellSize:i,prisonSize:a}=t;ae.on(`${l}PrisonSelectable`,(()=>n(4,o=!o)));return e.$$set=e=>{"code"in e&&n(0,l=e.code),"cellSize"in e&&n(5,i=e.cellSize),"prisonSize"in e&&n(1,a=e.prisonSize)},e.$$.update=()=>{38&e.$$.dirty&&(n(2,r=4*i+4),n(3,s=(a-r-10)/2))},[l,a,r,s,o,i,()=>{o&&ae.emit(`${l}Select`,"prison")}]}class pe extends j{constructor(e){super(),Y(this,e,ue,de,o,{code:0,cellSize:5,prisonSize:1})}}function fe(t){let n,r,s;return{c(){n=d("div"),m(n,"class","step svelte-14ca1mg"),m(n,"id",r="step-"+t[0]),m(n,"style",s=t[1]?`background-color: var(--${t[1]}-player);`:"")},m(e,t){i(e,n,t)},p(e,[t]){1&t&&r!==(r="step-"+e[0])&&m(n,"id",r),2&t&&s!==(s=e[1]?`background-color: var(--${e[1]}-player);`:"")&&m(n,"style",s)},i:e,o:e,d(e){e&&a(n)}}}function he(e,t,n){let{i:r}=t,{color:s=null}=t;return e.$$set=e=>{"i"in e&&n(0,r=e.i),"color"in e&&n(1,s=e.color)},[r,s]}class me extends j{constructor(e){super(),Y(this,e,he,fe,o,{i:0,color:1})}}function $e(e,t,n){const r=e.slice();return r[3]=t[n],r[5]=n,r}function ge(e,t,n){const r=e.slice();return r[3]=t[n],r[5]=n,r}function ve(e){let t,n,r,s;t=new me({props:{i:e[0]}});let o=Array(5),l=[];for(let t=0;t<o.length;t+=1)l[t]=we($e(e,o,t));const d=e=>H(l[e],1,1,(()=>{l[e]=null}));return{c(){U(t.$$.fragment),n=p();for(let e=0;e<l.length;e+=1)l[e].c();r=f()},m(e,o){D(t,e,o),i(e,n,o);for(let t=0;t<l.length;t+=1)l[t].m(e,o);i(e,r,o),s=!0},p(e,n){const s={};if(1&n&&(s.i=e[0]),t.$set(s),5&n){let t;for(o=Array(5),t=0;t<o.length;t+=1){const s=$e(e,o,t);l[t]?(l[t].p(s,n),B(l[t],1)):(l[t]=we(s),l[t].c(),B(l[t],1),l[t].m(r.parentNode,r))}for(O(),t=o.length;t<l.length;t+=1)d(t);A()}},i(e){if(!s){B(t.$$.fragment,e);for(let e=0;e<o.length;e+=1)B(l[e]);s=!0}},o(e){H(t.$$.fragment,e),l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)H(l[e]);s=!1},d(e){M(t,e),e&&a(n),c(l,e),e&&a(r)}}}function ye(e){let t,n,r=Array(6),s=[];for(let t=0;t<r.length;t+=1)s[t]=be(ge(e,r,t));const o=e=>H(s[e],1,1,(()=>{s[e]=null}));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=f()},m(e,r){for(let t=0;t<s.length;t+=1)s[t].m(e,r);i(e,t,r),n=!0},p(e,n){if(1&n){let l;for(r=Array(6),l=0;l<r.length;l+=1){const o=ge(e,r,l);s[l]?(s[l].p(o,n),B(s[l],1)):(s[l]=be(o),s[l].c(),B(s[l],1),s[l].m(t.parentNode,t))}for(O(),l=r.length;l<s.length;l+=1)o(l);A()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)B(s[e]);n=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)H(s[e]);n=!1},d(e){c(s,e),e&&a(t)}}}function we(e){let t,n;return t=new me({props:{i:e[0]+e[5]+1,color:e[2]}}),{c(){U(t.$$.fragment)},m(e,r){D(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.i=e[0]+e[5]+1),4&n&&(r.color=e[2]),t.$set(r)},i(e){n||(B(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function be(e){let t,n;return t=new me({props:{i:e[0]+e[5]}}),{c(){U(t.$$.fragment)},m(e,r){D(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.i=e[0]+e[5]),t.$set(r)},i(e){n||(B(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function xe(e){let t,n,r,s,o;const l=[ye,ve],c=[];function u(e,t){return e[2]?1:0}return n=u(e),r=c[n]=l[n](e),{c(){t=d("div"),r.c(),m(t,"class",s="flex flex-nowrap flex-"+e[1])},m(e,r){i(e,t,r),c[n].m(t,null),o=!0},p(e,[i]){let a=n;n=u(e),n===a?c[n].p(e,i):(O(),H(c[a],1,1,(()=>{c[a]=null})),A(),r=c[n],r?r.p(e,i):(r=c[n]=l[n](e),r.c()),B(r,1),r.m(t,null)),(!o||2&i&&s!==(s="flex flex-nowrap flex-"+e[1]))&&m(t,"class",s)},i(e){o||(B(r),o=!0)},o(e){H(r),o=!1},d(e){e&&a(t),c[n].d()}}}function ke(e,t,n){let{offsetIndex:r}=t,{flexDirection:s="row"}=t,{color:o=null}=t;return e.$$set=e=>{"offsetIndex"in e&&n(0,r=e.offsetIndex),"flexDirection"in e&&n(1,s=e.flexDirection),"color"in e&&n(2,o=e.color)},[r,s,o]}class Ne extends j{constructor(e){super(),Y(this,e,ke,xe,o,{offsetIndex:0,flexDirection:1,color:2})}}function Pe(t){let n;return{c(){n=d("div"),m(n,"class","triangle svelte-1n4h48y"),g(n,"background-color","var(--"+t[0]+"-player)"),g(n,"height",t[1]/2+"px"),g(n,"width",t[1]+"px"),g(n,"margin-top",t[3]+"px"),g(n,"margin-right",t[4]+"px"),g(n,"margin-left",t[5]+"px"),g(n,"margin-bottom",t[6]+"px"),g(n,"--rotate",90*t[2]+"deg")},m(e,t){i(e,n,t)},p(e,[t]){1&t&&g(n,"background-color","var(--"+e[0]+"-player)"),2&t&&g(n,"height",e[1]/2+"px"),2&t&&g(n,"width",e[1]+"px"),8&t&&g(n,"margin-top",e[3]+"px"),16&t&&g(n,"margin-right",e[4]+"px"),32&t&&g(n,"margin-left",e[5]+"px"),64&t&&g(n,"margin-bottom",e[6]+"px"),4&t&&g(n,"--rotate",90*e[2]+"deg")},i:e,o:e,d(e){e&&a(n)}}}function Se(e,t,n){let{color:r,gameHomeSize:s,i:o}=t,{top:l=0,right:i=0,left:a=0,bottom:c=0}=t;return e.$$set=e=>{"color"in e&&n(0,r=e.color),"gameHomeSize"in e&&n(1,s=e.gameHomeSize),"i"in e&&n(2,o=e.i),"top"in e&&n(3,l=e.top),"right"in e&&n(4,i=e.right),"left"in e&&n(5,a=e.left),"bottom"in e&&n(6,c=e.bottom)},[r,s,o,l,i,a,c]}class Ce extends j{constructor(e){super(),Y(this,e,Se,Pe,o,{color:0,gameHomeSize:1,i:2,top:3,right:4,left:5,bottom:6})}}function Le(e){let t,n,r,s,o,c,u,f,h,$,v,y,w,b,x,k,N,P,S,C,L,R,E,T,z,I,_,O,A,q,Y,j,F,J,G,W,K,Q,V,X,Z,ee,te,ne,re,se,oe,le,ie,ae;return o=new pe({props:{code:"red",cellSize:e[1],prisonSize:e[2]}}),u=new Ne({props:{offsetIndex:1,flexDirection:"column"}}),h=new Ne({props:{offsetIndex:7,flexDirection:"column",color:"blue"}}),v=new Ne({props:{offsetIndex:13,flexDirection:"column"}}),w=new pe({props:{code:"blue",cellSize:e[1],prisonSize:e[2]}}),N=new Ne({props:{offsetIndex:19}}),S=new Ne({props:{offsetIndex:25,color:"red"}}),L=new Ne({props:{offsetIndex:31}}),z=new Ce({props:{color:"green",i:0,top:e[3]/2,gameHomeSize:e[3]}}),_=new Ce({props:{color:"red",i:1,top:e[3]/4,left:-e[3]/4,gameHomeSize:e[3]}}),A=new Ce({props:{color:"blue",i:2,gameHomeSize:e[3]}}),Y=new Ce({props:{color:"yellow",i:3,top:e[3]/4,left:e[3]/4,gameHomeSize:e[3]}}),J=new Ne({props:{offsetIndex:37,flexDirection:"row-r"}}),W=new Ne({props:{offsetIndex:43,flexDirection:"row-r",color:"yellow"}}),Q=new Ne({props:{offsetIndex:49,flexDirection:"row-r"}}),Z=new pe({props:{code:"green",cellSize:e[1],prisonSize:e[2]}}),te=new Ne({props:{offsetIndex:55,flexDirection:"column-r"}}),re=new Ne({props:{offsetIndex:61,flexDirection:"column-r",color:"green"}}),oe=new Ne({props:{offsetIndex:67,flexDirection:"column-r"}}),ie=new pe({props:{code:"yellow",cellSize:e[1],prisonSize:e[2]}}),{c(){t=d("div"),n=d("div"),r=d("div"),s=d("div"),U(o.$$.fragment),c=p(),U(u.$$.fragment),f=p(),U(h.$$.fragment),$=p(),U(v.$$.fragment),y=p(),U(w.$$.fragment),b=p(),x=d("div"),k=d("div"),U(N.$$.fragment),P=p(),U(S.$$.fragment),C=p(),U(L.$$.fragment),R=p(),E=d("div"),T=d("div"),U(z.$$.fragment),I=p(),U(_.$$.fragment),O=p(),U(A.$$.fragment),q=p(),U(Y.$$.fragment),j=p(),F=d("div"),U(J.$$.fragment),G=p(),U(W.$$.fragment),K=p(),U(Q.$$.fragment),V=p(),X=d("div"),U(Z.$$.fragment),ee=p(),U(te.$$.fragment),ne=p(),U(re.$$.fragment),se=p(),U(oe.$$.fragment),le=p(),U(ie.$$.fragment),m(s,"class","flex flex-nowrap"),g(T,"z-index","6"),g(E,"width",e[3]+"px"),m(E,"class","game-home svelte-18xkrso"),m(x,"class","flex flex-nowrap"),m(X,"class","flex flex-nowrap"),m(r,"class","board-inner w-full"),m(n,"class","board w-full h-full svelte-18xkrso"),m(t,"class","board-wrapper svelte-18xkrso"),g(t,"--board-width",e[0]+"px"),g(t,"--board-height",e[0]+"px"),g(t,"--cell-size",e[1]+"px")},m(e,a){i(e,t,a),l(t,n),l(n,r),l(r,s),D(o,s,null),l(s,c),D(u,s,null),l(s,f),D(h,s,null),l(s,$),D(v,s,null),l(s,y),D(w,s,null),l(r,b),l(r,x),l(x,k),D(N,k,null),l(k,P),D(S,k,null),l(k,C),D(L,k,null),l(x,R),l(x,E),l(E,T),D(z,T,null),l(T,I),D(_,T,null),l(T,O),D(A,T,null),l(T,q),D(Y,T,null),l(x,j),l(x,F),D(J,F,null),l(F,G),D(W,F,null),l(F,K),D(Q,F,null),l(r,V),l(r,X),D(Z,X,null),l(X,ee),D(te,X,null),l(X,ne),D(re,X,null),l(X,se),D(oe,X,null),l(X,le),D(ie,X,null),ae=!0},p(e,[n]){const r={};2&n&&(r.cellSize=e[1]),4&n&&(r.prisonSize=e[2]),o.$set(r);const s={};2&n&&(s.cellSize=e[1]),4&n&&(s.prisonSize=e[2]),w.$set(s);const l={};8&n&&(l.top=e[3]/2),8&n&&(l.gameHomeSize=e[3]),z.$set(l);const i={};8&n&&(i.top=e[3]/4),8&n&&(i.left=-e[3]/4),8&n&&(i.gameHomeSize=e[3]),_.$set(i);const a={};8&n&&(a.gameHomeSize=e[3]),A.$set(a);const c={};8&n&&(c.top=e[3]/4),8&n&&(c.left=e[3]/4),8&n&&(c.gameHomeSize=e[3]),Y.$set(c),(!ae||8&n)&&g(E,"width",e[3]+"px");const d={};2&n&&(d.cellSize=e[1]),4&n&&(d.prisonSize=e[2]),Z.$set(d);const u={};2&n&&(u.cellSize=e[1]),4&n&&(u.prisonSize=e[2]),ie.$set(u),(!ae||1&n)&&g(t,"--board-width",e[0]+"px"),(!ae||1&n)&&g(t,"--board-height",e[0]+"px"),(!ae||2&n)&&g(t,"--cell-size",e[1]+"px")},i(e){ae||(B(o.$$.fragment,e),B(u.$$.fragment,e),B(h.$$.fragment,e),B(v.$$.fragment,e),B(w.$$.fragment,e),B(N.$$.fragment,e),B(S.$$.fragment,e),B(L.$$.fragment,e),B(z.$$.fragment,e),B(_.$$.fragment,e),B(A.$$.fragment,e),B(Y.$$.fragment,e),B(J.$$.fragment,e),B(W.$$.fragment,e),B(Q.$$.fragment,e),B(Z.$$.fragment,e),B(te.$$.fragment,e),B(re.$$.fragment,e),B(oe.$$.fragment,e),B(ie.$$.fragment,e),ae=!0)},o(e){H(o.$$.fragment,e),H(u.$$.fragment,e),H(h.$$.fragment,e),H(v.$$.fragment,e),H(w.$$.fragment,e),H(N.$$.fragment,e),H(S.$$.fragment,e),H(L.$$.fragment,e),H(z.$$.fragment,e),H(_.$$.fragment,e),H(A.$$.fragment,e),H(Y.$$.fragment,e),H(J.$$.fragment,e),H(W.$$.fragment,e),H(Q.$$.fragment,e),H(Z.$$.fragment,e),H(te.$$.fragment,e),H(re.$$.fragment,e),H(oe.$$.fragment,e),H(ie.$$.fragment,e),ae=!1},d(e){e&&a(t),M(o),M(u),M(h),M(v),M(w),M(N),M(S),M(L),M(z),M(_),M(A),M(Y),M(J),M(W),M(Q),M(Z),M(te),M(re),M(oe),M(ie)}}}function Re(e,t,n){let r,s,o,l;function i(){let e=document.getElementById("wrap");n(0,r=Math.min(e.clientHeight,e.clientWidth))}return b((()=>{i(),ae.onWindowLoad(),window.addEventListener("resize",i)})),e.$$.update=()=>{3&e.$$.dirty&&(n(1,s=(r-70)/15),n(2,o=6*s+24),n(3,l=3*s+8))},[r,s,o,l]}class Ee extends j{constructor(e){super(),Y(this,e,Re,Le,o,{})}}function Te(e){let t,n,r,s,o,c,f,v,y,w,b,x,k,N,P,S,C,L,R,E,T,z,I,_,O,A,B,H,U,D,M,q,Y,j,F,J,G,W=e[4].type.toProperCase()+"",K=e[4].coinsOutside+"",Q=e[4].coinsAtPrison+"",V=e[4].coinsReached+"",X=e[4].kills+"",Z=!e[2]&&ze(e),ee=e[4].rank&&Oe(e);return{c(){t=d("div"),n=d("div"),r=d("input"),c=p(),f=d("div"),v=d("p"),y=u(W),w=p(),b=d("p"),b.textContent="Coins Outside:",x=p(),k=d("p"),N=u(K),P=d("br"),S=p(),C=d("p"),C.textContent="Coins At Prison:",L=p(),R=d("p"),E=u(Q),T=d("br"),z=p(),I=d("p"),I.textContent="Coins Reached:",_=p(),O=d("p"),A=u(V),B=d("br"),H=p(),U=d("p"),U.textContent="Kills:",D=p(),M=d("p"),q=u(X),Y=d("br"),j=p(),Z&&Z.c(),F=p(),ee&&ee.c(),m(r,"class","player-input svelte-1aec7b6"),m(r,"type","text"),r.value=s=e[4].name.slice(0,10),r.readOnly=o=!e[3],m(n,"class","head"),g(n,"background-color","var(--"+e[0]+"-player)"),m(v,"class","sub-label type svelte-1aec7b6"),g(v,"color","var(--"+e[0]+"-player)"),m(b,"class","inline-block strong svelte-1aec7b6"),m(k,"class","inline-block svelte-1aec7b6"),m(C,"class","inline-block strong svelte-1aec7b6"),m(R,"class","inline-block svelte-1aec7b6"),m(I,"class","inline-block strong svelte-1aec7b6"),m(O,"class","inline-block svelte-1aec7b6"),m(U,"class","inline-block strong svelte-1aec7b6"),m(M,"class","inline-block svelte-1aec7b6"),m(f,"class","foot"),m(t,"class","player-tab svelte-1aec7b6")},m(s,o){i(s,t,o),l(t,n),l(n,r),l(t,c),l(t,f),l(f,v),l(v,y),l(f,w),l(f,b),l(f,x),l(f,k),l(k,N),l(f,P),l(f,S),l(f,C),l(f,L),l(f,R),l(R,E),l(f,T),l(f,z),l(f,I),l(f,_),l(f,O),l(O,A),l(f,B),l(f,H),l(f,U),l(f,D),l(f,M),l(M,q),l(f,Y),l(f,j),Z&&Z.m(f,null),l(f,F),ee&&ee.m(f,null),J||(G=h(r,"blur",e[7]),J=!0)},p(e,t){16&t&&s!==(s=e[4].name.slice(0,10))&&r.value!==s&&(r.value=s),8&t&&o!==(o=!e[3])&&(r.readOnly=o),1&t&&g(n,"background-color","var(--"+e[0]+"-player)"),16&t&&W!==(W=e[4].type.toProperCase()+"")&&$(y,W),1&t&&g(v,"color","var(--"+e[0]+"-player)"),16&t&&K!==(K=e[4].coinsOutside+"")&&$(N,K),16&t&&Q!==(Q=e[4].coinsAtPrison+"")&&$(E,Q),16&t&&V!==(V=e[4].coinsReached+"")&&$(A,V),16&t&&X!==(X=e[4].kills+"")&&$(q,X),e[2]?Z&&(Z.d(1),Z=null):Z?Z.p(e,t):(Z=ze(e),Z.c(),Z.m(f,F)),e[4].rank?ee?ee.p(e,t):(ee=Oe(e),ee.c(),ee.m(f,null)):ee&&(ee.d(1),ee=null)},d(e){e&&a(t),Z&&Z.d(),ee&&ee.d(),J=!1,G()}}}function ze(e){let t;function n(e,t){return!e[1]&&e[3]?_e:e[5]?Ie:void 0}let r=n(e),s=r&&r(e);return{c(){s&&s.c(),t=f()},m(e,n){s&&s.m(e,n),i(e,t,n)},p(e,o){r===(r=n(e))&&s?s.p(e,o):(s&&s.d(1),s=r&&r(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s&&s.d(e),e&&a(t)}}}function Ie(t){let n;return{c(){n=d("p"),n.textContent="CURRENT TURN",m(n,"class","sub-label svelte-1aec7b6")},m(e,t){i(e,n,t)},p:e,d(e){e&&a(n)}}}function _e(e){let t,n,r,s,o,c,p=e[4].type.toProperCase()+"";return{c(){t=d("a"),n=u("Remove "),r=u(p),s=u("?"),m(t,"href","#wrap")},m(a,d){i(a,t,d),l(t,n),l(t,r),l(t,s),o||(c=h(t,"click",e[6]),o=!0)},p(e,t){16&t&&p!==(p=e[4].type.toProperCase()+"")&&$(r,p)},d(e){e&&a(t),o=!1,c()}}}function Oe(e){let t,n,r,s=ie(e[4].rank)+"";return{c(){t=d("p"),n=u(s),r=u(" Place"),m(t,"class","sub-label svelte-1aec7b6")},m(e,s){i(e,t,s),l(t,n),l(t,r)},p(e,t){16&t&&s!==(s=ie(e[4].rank)+"")&&$(n,s)},d(e){e&&a(t)}}}function Ae(t){let n,r=!t[4].isNull&&Te(t);return{c(){r&&r.c(),n=f()},m(e,t){r&&r.m(e,t),i(e,n,t)},p(e,[t]){e[4].isNull?r&&(r.d(1),r=null):r?r.p(e,t):(r=Te(e),r.c(),r.m(n.parentNode,n))},i:e,o:e,d(e){r&&r.d(e),e&&a(n)}}}function Be(e,t,n){let{color:r,started:s}=t,{ended:o=!1}=t,{editable:l=!0}=t,i=ae.players[r],a=!1;l&&(ae.on(`${r}Update`,(()=>n(4,i=ae.players[r]))),ae.on("turn",(e=>n(5,a=e==r))));return e.$$set=e=>{"color"in e&&n(0,r=e.color),"started"in e&&n(1,s=e.started),"ended"in e&&n(2,o=e.ended),"editable"in e&&n(3,l=e.editable)},[r,s,o,l,i,a,function(){ae.deletePlayer(r)||ae.alert("You cannot remove yourself from the game!")},e=>{l&&(ae.updatePlayerName(r,e.target.value),ae.alert("Name updated",1e3))}]}class He extends j{constructor(e){super(),Y(this,e,Be,Ae,o,{color:0,started:1,ended:2,editable:3})}}function Ue(t){let n,s,o,c,u,f,$,v,y;return{c(){n=d("div"),s=d("div"),s.innerHTML='<h3 class="svelte-4moyru">Add</h3>',o=p(),c=d("div"),u=d("a"),u.textContent="Add Player?",f=p(),$=d("a"),$.textContent="Add Bot?",m(s,"class","head"),g(s,"background-color","var(--dull-player)"),m(u,"href","#wrap"),m($,"href","#wrap"),m(c,"class","foot"),m(n,"class","player-tab svelte-4moyru")},m(e,r){i(e,n,r),l(n,s),l(n,o),l(n,c),l(c,u),l(c,f),l(c,$),v||(y=[h(u,"click",t[2]),h($,"click",t[3])],v=!0)},p:e,d(e){e&&a(n),v=!1,r(y)}}}function De(t){let n,r=!t[0]&&t[1]&&Ue(t);return{c(){r&&r.c(),n=f()},m(e,t){r&&r.m(e,t),i(e,n,t)},p(e,[t]){!e[0]&&e[1]?r?r.p(e,t):(r=Ue(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:e,o:e,d(e){r&&r.d(e),e&&a(n)}}}function Me(e,t,n){let{started:r}=t;const s=()=>n(1,o=4!=ae.playerCount);let o=4!=ae.playerCount;ae.on("playerCountUpdate",s),ae.on("end",s);return e.$$set=e=>{"started"in e&&n(0,r=e.started)},[r,o,()=>{ae.createPlayer()||ae.alert("Player limit has been reached...")},()=>{ae.createPlayer(!0)||ae.alert("Player limit has been reached...")}]}class qe extends j{constructor(e){super(),Y(this,e,Me,De,o,{started:0})}}function Ye(e,t,n){const r=e.slice();return r[3]=t[n],r}function je(t){let n,r,s,o,u,f,$,g,v,y,w,b,x,k,N=ae.ranks.length&&function(t){let n;return{c(){n=d("p"),n.textContent=`${ae.ranks[0].name} has won the game!`,m(n,"class","svelte-1572n2l")},m(e,t){i(e,n,t)},p:e,d(e){e&&a(n)}}}(),P=ae.ranks,S=[];for(let e=0;e<P.length;e+=1)S[e]=Fe(Ye(t,P,e));const C=e=>H(S[e],1,1,(()=>{S[e]=null}));return{c(){n=d("div"),r=p(),s=d("div"),o=d("h3"),o.textContent="Result",u=p(),N&&N.c(),f=p(),$=d("h5"),$.textContent="Rankings",g=p(),v=d("div");for(let e=0;e<S.length;e+=1)S[e].c();y=p(),w=d("a"),w.textContent="Close Tab",m(n,"class","result-wrap svelte-1572n2l"),m(o,"class","svelte-1572n2l"),m($,"class","svelte-1572n2l"),m(v,"class","result-players-tab svelte-1572n2l"),m(w,"href","#wrap"),m(w,"class","svelte-1572n2l"),m(s,"class","result-tab svelte-1572n2l")},m(e,a){i(e,n,a),i(e,r,a),i(e,s,a),l(s,o),l(s,u),N&&N.m(s,null),l(s,f),l(s,$),l(s,g),l(s,v);for(let e=0;e<S.length;e+=1)S[e].m(v,null);l(s,y),l(s,w),b=!0,x||(k=h(w,"click",t[2]),x=!0)},p(e,t){if(ae.ranks.length&&N.p(e,t),1&t){let n;for(P=ae.ranks,n=0;n<P.length;n+=1){const r=Ye(e,P,n);S[n]?(S[n].p(r,t),B(S[n],1)):(S[n]=Fe(r),S[n].c(),B(S[n],1),S[n].m(v,null))}for(O(),n=P.length;n<S.length;n+=1)C(n);A()}},i(e){if(!b){for(let e=0;e<P.length;e+=1)B(S[e]);b=!0}},o(e){S=S.filter(Boolean);for(let e=0;e<S.length;e+=1)H(S[e]);b=!1},d(e){e&&a(n),e&&a(r),e&&a(s),N&&N.d(),c(S,e),x=!1,k()}}}function Fe(e){let t,n;return t=new He({props:{color:e[3].color,editable:!1,started:e[0]}}),{c(){U(t.$$.fragment)},m(e,r){D(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.started=e[0]),t.$set(r)},i(e){n||(B(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Je(e){let t,n,r=e[1]&&je(e);return{c(){r&&r.c(),t=f()},m(e,s){r&&r.m(e,s),i(e,t,s),n=!0},p(e,[n]){e[1]?r?(r.p(e,n),2&n&&B(r,1)):(r=je(e),r.c(),B(r,1),r.m(t.parentNode,t)):r&&(O(),H(r,1,1,(()=>{r=null})),A())},i(e){n||(B(r),n=!0)},o(e){H(r),n=!1},d(e){r&&r.d(e),e&&a(t)}}}function Ge(e,t,n){let{started:r}=t,s=!1;ae.on("displayResult",(()=>n(1,s=!0)));return e.$$set=e=>{"started"in e&&n(0,r=e.started)},[r,s,()=>n(1,s=!1)]}class We extends j{constructor(e){super(),Y(this,e,Ge,Je,o,{started:0})}}function Ke(e){let t,n;return t=new Ee({}),{c(){U(t.$$.fragment)},m(e,r){D(t,e,r),n=!0},i(e){n||(B(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function Qe(t){let n,s,o,l,c,u,f;return{c(){n=d("a"),n.textContent="Roll Dice",s=p(),o=d("a"),o.textContent="Save Game",l=p(),c=d("a"),c.textContent="New Game",m(n,"class","player-tab-btn svelte-1y8ugt6"),m(n,"href","#wrap"),m(o,"class","player-tab-btn svelte-1y8ugt6"),m(o,"href","#wrap"),m(c,"class","player-tab-btn svelte-1y8ugt6"),m(c,"href","#wrap")},m(e,r){i(e,n,r),i(e,s,r),i(e,o,r),i(e,l,r),i(e,c,r),u||(f=[h(n,"click",t[7]),h(o,"click",t[8]),h(c,"click",t[9])],u=!0)},p:e,d(e){e&&a(n),e&&a(s),e&&a(o),e&&a(l),e&&a(c),u=!1,r(f)}}}function Ve(e){let t,n,r,s,o,l=ce&&!e[3]&&Xe(e);return{c(){t=d("a"),t.textContent="New Game",n=p(),l&&l.c(),r=f(),m(t,"class","player-tab-btn svelte-1y8ugt6"),m(t,"href","#wrap")},m(a,c){i(a,t,c),i(a,n,c),l&&l.m(a,c),i(a,r,c),s||(o=h(t,"click",e[5]),s=!0)},p(e,t){ce&&!e[3]?l?l.p(e,t):(l=Xe(e),l.c(),l.m(r.parentNode,r)):l&&(l.d(1),l=null)},d(e){e&&a(t),e&&a(n),l&&l.d(e),e&&a(r),s=!1,o()}}}function Xe(t){let n,r,s;return{c(){n=d("a"),n.textContent="Resume Game",m(n,"class","player-tab-btn svelte-1y8ugt6"),m(n,"href","#wrap")},m(e,o){i(e,n,o),r||(s=h(n,"click",t[6]),r=!0)},p:e,d(e){e&&a(n),r=!1,s()}}}function Ze(t){let n,r,s;return{c(){n=d("a"),n.textContent="Results",m(n,"class","player-tab-btn svelte-1y8ugt6"),m(n,"href","#wrap")},m(e,o){i(e,n,o),r||(s=h(n,"click",t[10]),r=!0)},p:e,d(e){e&&a(n),r=!1,s()}}}function et(t){let n,r,s,c,u,f,h,$,g,y,w,b,x,k,N,P,S,C,L,R,E,T=t[4];s=new We({props:{started:t[2]}});let z=Ke();function I(e,t){return e[2]?Qe:Ve}g=new He({props:{color:"red",started:t[2],ended:t[3]}}),w=new He({props:{color:"yellow",started:t[2],ended:t[3]}}),x=new He({props:{color:"blue",started:t[2],ended:t[3]}}),N=new He({props:{color:"green",started:t[2],ended:t[3]}}),S=new qe({props:{started:t[2]}});let _=I(t),q=_(t),Y=t[1]&&Ze(t);return{c(){n=d("div"),r=p(),U(s.$$.fragment),c=p(),u=d("div"),z.c(),f=p(),h=d("div"),$=d("div"),U(g.$$.fragment),y=p(),U(w.$$.fragment),b=p(),U(x.$$.fragment),k=p(),U(N.$$.fragment),P=p(),U(S.$$.fragment),C=p(),L=d("div"),q.c(),R=p(),Y&&Y.c(),m(n,"class","wrap svelte-1y8ugt6"),m(n,"id","wrap"),m($,"class","flex flex-wrap"),m(L,"class","flex flex-wrap"),m(h,"class","players-tab svelte-1y8ugt6"),m(u,"class","flex svelte-1y8ugt6"),v(u,"mobile-view",t[0])},m(e,t){i(e,n,t),i(e,r,t),D(s,e,t),i(e,c,t),i(e,u,t),z.m(u,null),l(u,f),l(u,h),l(h,$),D(g,$,null),l($,y),D(w,$,null),l($,b),D(x,$,null),l($,k),D(N,$,null),l($,P),D(S,$,null),l(h,C),l(h,L),q.m(L,null),l(L,R),Y&&Y.m(L,null),E=!0},p(t,[n]){const r={};4&n&&(r.started=t[2]),s.$set(r),16&n&&o(T,T=t[4])&&(O(),H(z,1,1,e),A(),z=Ke(),z.c(),B(z),z.m(u,f));const l={};4&n&&(l.started=t[2]),8&n&&(l.ended=t[3]),g.$set(l);const i={};4&n&&(i.started=t[2]),8&n&&(i.ended=t[3]),w.$set(i);const a={};4&n&&(a.started=t[2]),8&n&&(a.ended=t[3]),x.$set(a);const c={};4&n&&(c.started=t[2]),8&n&&(c.ended=t[3]),N.$set(c);const d={};4&n&&(d.started=t[2]),S.$set(d),_===(_=I(t))&&q?q.p(t,n):(q.d(1),q=_(t),q&&(q.c(),q.m(L,R))),t[1]?Y?Y.p(t,n):(Y=Ze(t),Y.c(),Y.m(L,null)):Y&&(Y.d(1),Y=null),1&n&&v(u,"mobile-view",t[0])},i(e){E||(B(s.$$.fragment,e),B(z),B(g.$$.fragment,e),B(w.$$.fragment,e),B(x.$$.fragment,e),B(N.$$.fragment,e),B(S.$$.fragment,e),E=!0)},o(e){H(s.$$.fragment,e),H(z),H(g.$$.fragment,e),H(w.$$.fragment,e),H(x.$$.fragment,e),H(N.$$.fragment,e),H(S.$$.fragment,e),E=!1},d(e){e&&a(n),e&&a(r),M(s,e),e&&a(c),e&&a(u),z.d(e),M(g),M(w),M(x),M(N),M(S),q.d(),Y&&Y.d()}}}function tt(e,t,n){let r=!1,s=!1,o=ae.started,l=ae.ended,i={};function a(){let e=document.getElementById("wrap");n(0,r=e.clientWidth<2*e.clientHeight)}ae.on("start",(()=>{n(2,o=!0),l&&n(4,i={}),n(3,l=!1)})),ae.on("canDisplayResults",(()=>n(1,s=!0))),ae.on("end",(()=>{n(1,s=!0),n(3,l=!0),ae.emit("displayResult")})),b((()=>{a(),window.addEventListener("resize",a)}));return[r,s,o,l,i,async()=>{if(ce&&!confirm("Are you sure? Your old game data might be deleted!"))return;await ae.start()||ae.alert("Minimum two players are required.",1e3)},()=>ae.startFromSaved(),()=>ae.emit("diceRoll"),()=>ae.save(),()=>{confirm("Are you sure? Your old game data might be deleted!")&&(ae.clearSaved(),window.location.href="?game")},()=>ae.emit("displayResult")]}class nt extends j{constructor(e){super(),Y(this,e,tt,et,o,{})}}function rt(t){let n;return{c(){n=d("div"),n.innerHTML='<h1 class="m-0 svelte-1qrebkq">Ludo</h1> \n\t\t<p class="m-0 svelte-1qrebkq">An awesome site to play ludo singleplayer for fun even with bots!</p> \n\n\t\t<a href="?game" class="cover-btn svelte-1qrebkq">Lets play!</a> \n\t\t<p class="credits m-0 svelte-1qrebkq">Made by <a href="https://github.com/scientific-dev" class="svelte-1qrebkq">scientific-dev</a></p>',m(n,"class","cover svelte-1qrebkq")},m(e,t){i(e,n,t)},i:e,o:e,d(e){e&&a(n)}}}function st(e){let t,n;return t=new nt({}),{c(){U(t.$$.fragment)},m(e,r){D(t,e,r),n=!0},i(e){n||(B(t.$$.fragment,e),n=!0)},o(e){H(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ot(t){let n,r,s,o,l,c;const u=[st,rt],h=[];return s=function(e,t){return e[0]?0:1}(t),o=h[s]=u[s](t),{c(){n=d("div"),r=p(),o.c(),l=f(),m(n,"class","bg-cover svelte-1qrebkq")},m(e,t){i(e,n,t),i(e,r,t),h[s].m(e,t),i(e,l,t),c=!0},p:e,i(e){c||(B(o),c=!0)},o(e){H(o),c=!1},d(e){e&&a(n),e&&a(r),h[s].d(e),e&&a(l)}}}function lt(e){return[new URLSearchParams(window.location.search).has("game")]}return new class extends j{constructor(e){super(),Y(this,e,lt,ot,o,{})}}({target:document.body})}();
